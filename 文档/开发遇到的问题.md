## 记录一下开发遇到的问题，以便面试吹牛

### 审批流程组件，节点id唯一问题
- 因为节点很长，id当时业务用的是生成时间戳的方式来生成唯一id的，因为增加节点的需求很多增加的那个节点代码很冗余，我把节点在data封装起来，这样$set的时候直接调用就好了。但是写完测试的时候发现节点是id是一样的，然后突然想到data里声明的那个节点应该是只初始化了一次，在调用的时候并不会被重新赋新的时间戳，也就是虽然写在data上是用的new Data()，但实际上调用的时候已经是一个生成好的固定值，所以这样是无效的。
- 更改方案就是换回来（不是），就是调用的时候先深拷贝一次，然后把里面的id重新用时间戳赋值，这样就可以了。

### vue2.6升2.7遇到的坑和解决方案
- mixin vue3其实也有mixin但已经不被提倡使用了，而且用的时候容易出错，一种解决方案是把之前mixin的js文本改成hooks函数，另一种是不要在setup里面用，单独定义一个script去用mixin，然后用获取组件实例（getCurrentInstance）的方案去获取mixin的方法。
- $emit -> defineEmit()
- $refs -> ref（直接获取到ref实例）
- provide inject 数据可响应
- attr -> useAttrs()
- watch computed写法改变， 新增watchEffect自动追踪数据
- props定义写法改变
- defineExpose()释放事件（或变量）给外部组件调用，否则undefined
- 以前的data现在无了 改成用ref或者reactive定义了，ref定义的东西获取值要加.value
- 生命周期的钩子名字变了，包括说之前总是用this代，现在已经没有this了，如果真的想用以前的this来做一些操作的话就是用getCurrentInstance()去获取组件的整个实例（作为这里的this）
- props的数据是只读的，computed简化写法也是只读的（getset都写就是可读写），watch有时候直接写那个变量是监听不到的，要用箭头函数包一下.